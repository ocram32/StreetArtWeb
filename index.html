<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Street Art Website</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="estilos.css">
    <link rel="shortcut icon" href="media/favicon.jpg" type="image/x-icon">

</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <a class="navbar-brand" href="#">Street Art<br>Website</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="sobre.html">Sobre...</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="obras.html">Obras</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="artistas.html">Artistas</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="mapa.html">Mapa</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contacto.html">Contacto</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="banner" style="height: 75vh;">
        <div id="svg-container"></div>
      <script src="Snap.svg-0.5.1/Snap.svg-0.5.1/"></script>
console.clear();

var s = Snap("#svg-container");
var sMaxX = 800;
var sMaxY = 600;
var viewBoxList = [0, 0, sMaxX, sMaxY];
s.attr({
    viewBox: viewBoxList
});

var gLines = s.g();
var gText = s.g();
var patt;
var maskObj;
var text;
var maskElem = s.mask();

var pSize = 700;
var maxLines = 16;
var maxLinesDouble = maxLines * 2;
var lineStep = pSize / maxLines;
var lines = [];
var pathDur = 1000;
var delay = 250;

var colorSteps = maxLines / 2;
var colors = ['purple',
              'crimson',
              'orangered',
              'orange',
              'gold',
              'yellowgreen',
              'steelblue',
              'teal',
              'purple'
             ]

var lineLength = Math.sqrt( Math.pow( pSize, 2 ) * 2);


var lineObj = function () {
    var d = 'M' + [pSize, 0, 0, pSize];
    var path = s.path(d);
    var pos = 0;
    var addMask = false;
    var pathDelay = 0;
    var dashArray = 0;
    var strokeW = 0;

    this.init = function ( params ) {
        pos = params.pos;
        strokeW = params.strokeW;
        var strokeColor = params.color || 'hotpink'
        var offsetX = params.offsetX || 0;
        var x = pSize - lineStep * (pos + .5) + offsetX;
        var translateParams = [x, 0];

        pathDelay = params.delay || delay;
        dashArray = lineLength;
        addMask = params.addMask || false;

        path.attr({
            transform: 'translate(' + translateParams + ')',
            'stroke-width': strokeW,
            stroke: strokeColor,
            'stroke-linecap': 'square',
            'stroke-dashoffset': lineLength,
            'stroke-dasharray': dashArray
        });

        gLines.add(path);

    }// Init

    this.reset = function () {
        path.attr({
            'stroke-dashoffset': lineLength,
            'stroke-dasharray': dashArray
        });
    }

    this.animdDelay = function() {
        setTimeout(pathAnim,
                   (maxLinesDouble - pos) * pathDelay
                  );
    }

    var countNextAnim = 0;

    function runNextAnim() {
        if ( addMask == true ) {
            // Why 0?
            if ( pos == 0) {
                countNextAnim++;

                maskObj.maskAnim();
            }
        }
    }

    function pathAnim () {

        path.animate({
            'stroke-dashoffset': '0'
        	},
			pathDur,
			runNextAnim
            );
    }

}// lineObj

// ------------------------------------

function createLines( params ) {

    var strokeW = params.strokeW;

    for ( var i = 0; i < maxLinesDouble; i++ ) {
        var line = new lineObj;
        var color = params.color || colors[i % colorSteps];

        line.init({
            pos: i,
            strokeW: params.strokeW,
            offsetX: params.offsetX,
            delay: params.delay,
            addMask: params.addMask || false,
            color: color,
        });

        lines.push(line);
    }
}

// ------------------------------------

function createPattern() {

//     console.log('* - createPattern');

    var rect = s.rect(0,0, pSize, pSize);
    rect.attr({
        fill: 'white',
    });

    gLines.add(rect);

    createLines({
        strokeW: lineStep / 1.4,
        addMask: false
        });

    createLines({
        strokeW: 2,
        color: '#002',
        offsetX: lineStep / 2 + 7,
        delay: 300,
        addMask: true
    	});

  	patt = gLines.toPattern(0,0, pSize, pSize);

}

function animatePattern() {

    for ( var i = 0; i < lines.length; i++ ) {
        var line = lines[i];

        line.reset();
        line.animdDelay();
    }
}

// ------------------------------------

var textObj = function () {

    var textDur = 1500;
    var dashoffset = 1200;
    var textGInit = s.g();
        var text1 = s.text('50%','34%','Hello');
        var text2 = s.text('50%','73%','world');

    text1.attr({
       dy: '.3em',
       'font-size': '1.15em'
    });
    text2.attr({
       dy: '.3em'
    });

    textGInit.add(text1, text2);

    textGInit.attr({
        'text-anchor': 'middle',
        'font': '15em/1 Impact',
        fill: 'white',
        stroke: '#000',
        'stroke-width': 3,
        'stroke-dasharray': dashoffset,
        'stroke-dashoffset': dashoffset
    });

    var textGFill = textGInit.clone();

    textGInit.attr({
        transform: 'translate(10,10)'
    });

    gText.add(textGInit, textGFill);

    this.textAnim = function () {
        textGFill.animate({
            'stroke-dashoffset': 0
	        },
            textDur,
            setTextStroke);
    }

    function setTextStroke () {
        setTextFill();

        textGInit.animate({
            'stroke-dashoffset': 0
            },
            textDur
            );
    }

    function setTextFill () {

        animatePattern();

        textGFill.attr({
            fill: patt
        });
    }

    this.reset = function () {

        var initState = {
            fill: 'white',
            'stroke-dasharray': dashoffset,
            'stroke-dashoffset': dashoffset
        };

        textGInit.attr( initState );
        textGFill.attr( initState );

        this.textAnim();
    }
}

// ------------------------------------

function createText() {
//     console.log('* - createText');
    text = new textObj;
    text.textAnim();
}

// ------------------------------------

var maskObjInit = function () {
    var maskShape;

    var currentStep = 0;
    var steps = [
        {rx: '10%', ry: "10%"},
        {rx: '35%', ry: "35%"},
        {rx: '0%', ry: "0%"}
    ];

    this.init = function () {
        maskShape = s.ellipse('50%', '50%', '100%', '100%');

        maskShape.attr({
            fill: "white"
        });

        maskElem.add(maskShape);

        gText.attr({
            mask: maskElem
        });
    }

    this.maskAnim = function () {
//         console.log('- * - anim mask');

        if ( currentStep == steps.length ) {
            setTimeout(reRun, 1000);
            return;
        }

        maskShape.animate(
            steps[currentStep]
            ,
            300,
            maskObj.maskAnim);
        currentStep++;
    }

    this.reset = function () {
        currentStep = 0;

        var initState = {
            rx: '100%',
            ry: "100%"
        };

        maskShape.attr(initState);
    }
}

function createMask() {
//     console.log('* - createMask');
    maskObj = new maskObjInit;
    maskObj.init();
}

// ------------------------------------

createPattern();
createText();
createMask();

function reRun() {

    maskObj.reset();
    text.reset();
}

/*var wrapper = document.createElement("div");
document.body.appendChild(wrapper);
wrapper.appendChild(s.node);*/
     </script>
    </div>
                <!-- Contenido de la página -->
                                  <!-- Fila 1 -->
    <div class="container">
        <div class="row">
            <!-- Columna de texto -->
            <div class="col-md-6">
                <div class="col-texto">
                <h2>¿Qué es y cómo nació el Street Art?</h2>
                <p>
                    El street art es una forma de expresión artística que se originó en las calles y espacios urbanos. Surgió como una manifestación de creatividad fuera de los confines tradicionales de galerías y museos. A menudo, implica pinturas murales, grafiti, stencils y otras técnicas para transmitir mensajes culturales, políticos o personales. El movimiento del street art se desarrolló a lo largo del siglo XX. Desde entonces, ha evolucionado y diversificado, convirtiéndose en una forma de arte influyente que se encuentra en todo el mundo. <br>
                </p>
                <a href="sobre.html" class="link-leer-mas">Leer más</a>
            </div>
            </div>
            <!-- Columna de imagen -->
            <div class="col-md-6">
                <img src="media/home1.png" alt="Imagen">
            </div>
        </div>
    </div>
  <!-- Fila 2 -->
  <div class="container">
    <div class="row">
        <!-- Columna de imagen a la izquierda -->
        <div class="col-md-6">
            <img src="media/home2.png" alt="Imagen">
        </div>
        <!-- Columna de texto a la derecha -->
        <div class="col-md-6">
            <div class="col-texto">
                <h2>Artistas</h2>
                <p>
                    Los artistas del street art son visionarios urbanos que transforman entornos comunes en lienzos vivos. <u>Banksy</u>, con su enigmático anonimato, y <u>Shepard Fairey</u>, creador del emblemático "Hope", son solo dos ejemplos. Estos talentos desafían las convenciones, abordan temas sociales y políticos, y dan vida a espacios urbanos con su creatividad audaz. Sus obras provocan reflexión, alteran la percepción y redefinen el arte en lugares públicos.
                </p>
                <a href="artistas.html" class="link-leer-mas">Ver artistas</a>
            </div>
        </div>
    </div>
</div>

                              <!-- Fila 3 -->
                              <div class="container">
                                <div class="row">
                                    <!-- Columna de texto -->
                                    <div class="col-md-6">
                                        <div class="col-texto">
                                        <h2>Obras</h2>
                                        <p>
                                            Descubrí las obras asombrosas del street art, un lenguaje visual que da vida a las calles y despierta emociones. Explora la creatividad urbana que desafía lo convencional y celebra la expresión artística en su forma más audaz. Sumergite en un mundo de colores, mensajes y formas que cuentan historias y transforman el paisaje urbano en un lienzo de infinitas posibilidades. <br>
                                        </p>
                                        <a href="obras.html" class="link-leer-mas">Ver obras</a>
                                    </div>
                                    </div>
                                    <!-- Columna de imagen -->
                                    <div class="col-md-6">
                                        <img src="media/home3.png" alt="Imagen">
                                    </div>
                                </div>
                            </div>

                            <footer>
                                <div class="container">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="street-art-text">
                                                <p class="street-art-texto">Street Art Website</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6 text-right">
                                            <a class="ig" href="https://instagram.com/portfolio.marco" target="_blank">
                                                <img src="media/ig.png" alt="Instagram" class="instagram-icon" width="60" height="60">
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </footer>


    <!-- Scripts de Bootstrap y jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
